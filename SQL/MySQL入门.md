---
layout:     post  
title:      MySQL入门 
subtitle:   MySQL
date:       2020-2-10
author:     小卷子
header-img: img/tag-bg.jpg
catalog: true
tags:
    - 标签
---



[TOC]





### MySql的基本操作

#### 开启服务

~~~sql
mysql.server start
~~~

#### 关闭服务

```sql
mysql.server stop
```

#### 登录

```sql
mysql -u root -p
```

#### 退出

```sql
quit
exit
\q
```



### 数据库的基本操作

#### 创建数据库

~~~sql
CREATE DATABASE 数据库名;
~~~

#### 查看当前服务下的所有数据库

```sql
SHOW DATABASES;
```

#### 打开数据库

```sql
USE 数据库名;
```

#### 删除数据库

```sql
DROP DATABASE 数据库名;
```

创建时如果已经存在同名的数据库会报错，删除时如果不存在数据也会报错。可以使用下面这样的语句

~~~sql
CREATE DATABASE [IF NOT EXISTS] 数据库名;
DROP DATABASE [IF EXISTS] 数据库名;
~~~

####查看当前数据库下所有的表

~~~sql
SHOW TABLES;
~~~



### 数据表的基本操作

数据表由行和列组成，表明要求唯一。

#### 创建表

~~~sql
CREATE TABLE  表名(
    字段名称 字段类型 [完整性约束条件],
    字段名称 字段类型 [完整性约束条件],
	...
);
~~~

#### 常见的约束条件

**UNSIGNED：**无符号，没有负数，从0开始
**ZEROFILL：**零填充，当数据的显示长度不够的时候可以使用前补0的效果填充至指定长度,字段会自动添加UNSIGNED
**NOT NULL：**非空约束，也就是插入值的时候这个字段必须要给值,值不能为空
**DEFAULT：**默认值，如果插入记录的时候没有给字段赋值，则使用默认值
**PRIMARY KEY：**主键，标识记录的唯一性，值不能重复，一个表只能有一个主键，自动禁止为空
**AUTO_INCREMENT：**自动增长，只能用于数值列，而且配合索引使用,默认起始值从1开始，每次增长
**UNIQUE KEY：**唯一性，一个表中可以有多个字段是唯一索引，同样的值不能重复，但是NULL值除外
**FOREIGN KEY：**外键约束

示例

~~~sql
CREATE TABLE first_table (
    first_column INT,
    second_column VARCHAR(100)
);
~~~

#### 查看数据表的详细信息

```sql
SHOW CREATE TABLE 表名;
```

此命令能查看建表语句

#### 查看表

```sql
DESC 表名;
```

#### 删除表

```sql
DROP TABLE [IF EXISTS] 表名;
```

#### 添加字段

```sql
ALTER TABLE 表名 
ADD 字段名称 字段属性 [完整性约束条件] [FIRST|AFTER 字段名称]
```

#### 删除字段

```sql
ALTER TABLE 表名
DROP 字段名称
```

#### 字段添加默认值

```sql
ALTER TABLE 表名
ALTER 字段名称 SET DEFAULT 默认值;
```

#### 字段删除默认值

```sql
ALTER TABLE 表名
ALTER 字段名称 DROP DEFAULT
```

#### 修改字段属性

```sql
ALTER TABLE 表名
MODIFY 字段名称 字段类型 [字段属性] [FIRST | AFTER 字段名称]
```

#### 修改字段名称，属性

```sql
ALTER TABLE 表名
CHANGE 原字段名称 新字段名称 字段类型 字段属性 [FIRST | AFTER 字段名称]
```

#### 添加主键

```sql
ALTER TABLE 表名
ADD PRIMARY KEY(字段名称)
```

#### 删除主键

```sql
ALTER TABLE 表名
DROP PRIMARY KEY;
```

#### 添加唯一属性

```sql
ALTER TABLE 表名
ADD UNIQUE KEY|INDEX [字段名] 
```

#### 删除唯一属性

```sql
ALTER TABLE 表名 
DROP 字段名;
```

#### 修改表名

```sql
ALTER TABLE 表名 
RENAME [TO|AS] 新表名
```

~~~sql
RENAME TABLE tbl_name TO 新表名;
~~~

#### 清空表

~~~sql
RUNCATE TABLE 表名;
~~~





###数据类型

####数字类型

很显然，使用的字节数越多，意味着能表示的数值范围就越大，但是也就越耗费存储空间。根据表示一个数占用字节数的不同，`MySQL`把整数划分成如下所示的类型：

| 类型         | 大小                                     | 范围（有符号）                                               | 范围（无符号）                                               |      用途       |
| :----------- | :--------------------------------------- | :----------------------------------------------------------- | :----------------------------------------------------------- | :-------------: |
| TINYINT      | 1 字节                                   | (-128，127)                                                  | (0，255)                                                     |    小整数值     |
| SMALLINT     | 2 字节                                   | (-32 768，32 767)                                            | (0，65 535)                                                  |    大整数值     |
| MEDIUMINT    | 3 字节                                   | (-8 388 608，8 388 607)                                      | (0，16 777 215)                                              |    大整数值     |
| INT或INTEGER | 4 字节                                   | (-2 147 483 648，2 147 483 647)                              | (0，4 294 967 295)                                           |    大整数值     |
| BIGINT       | 8 字节                                   | (-9,223,372,036,854,775,808，9 223 372 036 854 775 807)      | (0，18 446 744 073 709 551 615)                              |   极大整数值    |
| FLOAT        | 4 字节                                   | (-3.402 823 466 E+38，-1.175 494 351 E-38)，0，(1.175 494 351 E-38，3.402 823 466 351 E+38) | 0，(1.175 494 351 E-38，3.402 823 466 E+38)                  | 单精度 浮点数值 |
| DOUBLE       | 8 字节                                   | (-1.797 693 134 862 315 7 E+308，-2.225 073 858 507 201 4 E-308)，0，(2.225 073 858 507 201 4 E-308，1.797 693 134 862 315 7 E+308) | 0，(2.225 073 858 507 201 4 E-308，1.797 693 134 862 315 7 E+308) | 双精度 浮点数值 |
| DECIMAL      | 对DECIMAL(M,D) ，如果M>D，为M+2否则为D+2 | 依赖于M和D的值                                               | 依赖于M和D的值                                               |     小数值      |



####日期和时间类型

| 类型      | 大小 (字节) | 范围                                                         | 格式                | 用途                     |
| :-------- | :---------- | :----------------------------------------------------------- | :------------------ | :----------------------- |
| DATE      | 3           | 1000-01-01/9999-12-31                                        | YYYY-MM-DD          | 日期值                   |
| TIME      | 3           | '-838:59:59'/'838:59:59'                                     | HH:MM:SS            | 时间值或持续时间         |
| YEAR      | 1           | 1901/2155                                                    | YYYY                | 年份值                   |
| DATETIME  | 8           | 1000-01-01 00:00:00/9999-12-31 23:59:59                      | YYYY-MM-DD HH:MM:SS | 混合日期和时间值         |
| TIMESTAMP | 4           | 1970-01-01 00:00:00/2038结束时间是第 **2147483647** 秒，北京时间 **2038-1-19 11:14:07**，格林尼治时间 2038年1月19日 凌晨 03:14:07 | YYYYMMDD HHMMSS     | 混合日期和时间值，时间戳 |

####字符串类型

| 类型       | 大小                | 用途                            |
| :--------- | :------------------ | :------------------------------ |
| CHAR(M)    | 0-255字节           | 固定长度字符串                  |
| VARCHAR(M) | 0-65535 字节        | 可变长度字符串                  |
| TINYBLOB   | 0-255字节           | 不超过 255 个字符的二进制字符串 |
| TINYTEXT   | 0-255字节           | 短文本字符串                    |
| BLOB       | 0-65 535字节        | 二进制形式的长文本数据          |
| TEXT       | 0-65 535字节        | 长文本数据                      |
| MEDIUMBLOB | 0-16 777 215字节    | 二进制形式的中等长度文本数据    |
| MEDIUMTEXT | 0-16 777 215字节    | 中等长度文本数据                |
| LONGBLOB   | 0-4 294 967 295字节 | 二进制形式的极大文本数据        |
| LONGTEXT   | 0-4 294 967 295字节 | 极大文本数据                    |

####ENUM类型和SET类型

ENUM：也叫枚举类，格式如下：

```sql
ENUM('str1', 'str2', 'str3' ⋯)
```

表示只能在给定的字符串中选择一个。

SET：表示可能从给定的值里选择多个，格式如下：

```sql
SET('str1', 'str2', 'str3' ⋯)
```





### 数据的基本操作

#### 插入数据



#### 修改数据



#### 删除数据





### 查找数据

#### 查询语句的基本形式



#### where条件筛选



#### group by分组



#### order by 排序



#### limit限制结果数量





### 数据的高级操作

#### 多表联查



#### 外键约束



#### 动态创建外键



#### 删除外键



#### 子查询



#### any、some、all关键字的子查询



#### 联合查询



#### 无限级分类数据表



### 常用函数

#### 数据函数



#### 字符串常用函数



#### 日期常用函数



#### 其他常用函数



### MyBatis入门





### MyBatis进阶



